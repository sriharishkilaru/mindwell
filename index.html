<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindWell - College Mental Health Support</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
		/* modern attractive palette */
		--primary: #2b2e83;       /* deep indigo */
		--primary-2: #3843a8;
		--secondary: #6c8ef5;     /* soft sky blue */
		--accent: #ffb86b;        /* warm amber */
		--accent-2: #ff6b6b;      /* coral */
		--muted: #6c7a89;
		--bg: #f4f7ff;
		--card-bg: rgba(255,255,255,0.88);
		--glass-border: rgba(108,142,245,0.10);
		--dark: #233047;
		--success: #28a745;
	}

	/* base */
	body{
		font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		background: linear-gradient(180deg,var(--bg),#ffffff);
		color: var(--dark);
		line-height:1.6;
	}

	/* navbar */
	.navbar{
		background: linear-gradient(90deg,var(--primary-2),var(--primary));
		box-shadow: 0 8px 32px rgba(34,40,80,0.12);
	}
	.navbar-brand{ color:#fff; font-weight:700; }

	/* hero */
	.hero-section{
		background: linear-gradient(135deg,var(--primary),var(--secondary));
		color:#fff;
		padding:80px 0;
		margin-bottom:40px;
		background-blend-mode:multiply;
	}

	/* cards: subtle glass */
	.feature-card,
	.resource-card,
	.assessment-card,
	.card{
		background: var(--card-bg);
		border:1px solid var(--glass-border);
		backdrop-filter: blur(6px);
		box-shadow: 0 10px 30px rgba(34,40,80,0.06);
		border-radius:12px;
	}

	.feature-card:hover,
	.resource-card:hover,
	.assessment-card:hover{
		transform: translateY(-6px);
		box-shadow: 0 18px 40px rgba(34,40,80,0.10);
	}

	/* chat — refreshed */
	.chat-container{
		background: linear-gradient(180deg,#ffffff,rgba(244,247,255,0.95));
		border-radius:12px;
		box-shadow: 0 14px 36px rgba(34,40,80,0.08);
		display:flex;
		flex-direction:column;
		height:500px;
		overflow:hidden;
	}

	.chat-header{
		padding:14px 18px;
		display:flex;
		align-items:center;
		gap:10px;
		background: linear-gradient(90deg, rgba(43,46,131,0.08), rgba(108,142,245,0.04));
		color: #fff;
	}
	.chat-header i.fa-robot{
		width:40px; height:40px; display:inline-flex; align-items:center; justify-content:center;
		border-radius:50%; background: linear-gradient(90deg,var(--secondary),var(--primary));
		color:#fff; box-shadow: 0 8px 22px rgba(43,46,131,0.12);
	}

	.chat-messages{
		padding:18px;
		padding-bottom:160px; /* reserve space so quick-replies / input never overlap messages */
		overflow-y:auto;
		display:flex;
		flex-direction:column;
		gap:12px;
		background: transparent;
	}

	/* message bubbles */
	.message-row{ display:flex; gap:12px; align-items:flex-end; }
	.message-row.user{ justify-content:flex-end; }
	.message-row.bot{ justify-content:flex-start; }

	.avatar{ width:40px; height:40px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; font-weight:700; color:#fff; flex:0 0 40px; box-shadow:0 8px 20px rgba(34,40,80,0.06); }
	.avatar.user{ background: linear-gradient(90deg,var(--secondary),var(--primary)); }
	.avatar.bot{ background: linear-gradient(90deg,#fff0, rgba(108,142,245,0.12)); color:var(--primary); border:1px solid rgba(108,142,245,0.08); }

	.message-bubble{
		max-width:74%;
		padding:12px 14px;
		border-radius:14px;
		box-shadow: 0 10px 28px rgba(34,40,80,0.06);
		transition: transform .18s ease, box-shadow .18s ease;
	}
	.message-bubble.user{ background: linear-gradient(90deg,var(--secondary),var(--primary)); color:#fff; border-bottom-right-radius:6px; }
	.message-bubble.bot{ background: linear-gradient(180deg,#f8fbff,#f1f6ff); color:var(--dark); border-bottom-left-radius:6px; }
	.message-bubble:hover{ transform: translateY(-4px); box-shadow: 0 18px 44px rgba(34,40,80,0.08); }

	.message-body{ margin:0; white-space:pre-wrap; word-break:break-word; }
	.meta{ margin-top:8px; font-size:0.78rem; color:var(--muted); }

	/* typing */
	.typing-indicator{ display:flex; gap:6px; padding:8px 12px; border-radius:12px; background: rgba(0,0,0,0.03); align-items:center; }
	.typing-dot{ width:8px; height:8px; background:var(--muted); border-radius:50%; animation:typing 1.2s infinite; }
	@keyframes typing{ 0%,80%,100%{ transform:translateY(0); opacity:.6 } 40%{ transform:translateY(-6px); opacity:1 } }

	/* quick-replies */
	.quick-replies{ display:flex; flex-wrap:wrap; gap:8px; margin-top:6px; align-items:center; }
	.quick-reply{
		background:#fff;
		border:1px solid rgba(43,46,131,0.08);
		color:var(--primary);
		padding:8px 14px;
		border-radius:999px;
		cursor:pointer;
		font-weight:600;
		box-shadow: 0 8px 18px rgba(17,24,39,0.04);
		transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
	}
	.quick-reply:hover{ transform: translateY(-3px); background: linear-gradient(90deg, rgba(108,142,245,0.06), rgba(108,142,245,0.03)); }
	.quick-reply:active{ transform: scale(.98); }

	/* suggested topics (make them inline pills instead of list) */
	.suggested-topics{ display:flex; flex-wrap:wrap; gap:8px; margin-top:10px; }
	.topic-pill{
		display:inline-flex;
		align-items:center;
		justify-content:center;
		padding:8px 12px;
		border-radius:999px;
		background: linear-gradient(90deg,#fff, rgba(108,142,245,0.04));
		border:1px solid rgba(108,142,245,0.10);
		color:var(--primary);
		font-weight:600;
		cursor:pointer;
		transition: transform .12s ease, box-shadow .12s ease;
	}
	.topic-pill:hover{ transform: translateY(-3px); box-shadow: 0 10px 26px rgba(43,46,131,0.06); }

	/* input area — make send prominent */
	.p-3 .input-group{ display:flex; gap:10px; align-items:center; }
	.p-3 .input-group .form-control{ border-radius:999px; padding:12px 16px; border:1px solid rgba(34,40,80,0.06); box-shadow:none; }
	.p-3 .input-group .btn{
		border-radius:10px; padding:10px 14px; background: linear-gradient(90deg,var(--secondary),var(--primary)); border:none; color:#fff;
		box-shadow: 0 12px 30px rgba(43,46,131,0.12);
	}
	.p-3 .input-group .btn:active{ transform: translateY(1px); }

	/* small screens */
	@media (max-width:576px){ .message-bubble{ max-width:78%; } .chat-container{ height:480px; } }
    </style>
</head>
<body>
    <!-- Emergency Banner -->
    <div class="emergency-banner">
        <div class="container">
            <i class="fas fa-exclamation-circle"></i> In crisis? Need immediate help? Call College Counseling Emergency Line: <strong>1-800-273-8255</strong>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-brain me-2"></i> MindWell
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link active" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#resources">Resources</a></li>
                    <li class="nav-item"><a class="nav-link" href="#forum">Peer Support</a></li>
                    <li class="nav-item"><a class="nav-link" href="#booking">Book Appointment</a></li>
                    <li class="nav-item"><a class="nav-link" href="#assessment">Self-Assessment</a></li>
                    <li class="nav-item"><a class="nav-link" href="wellness_challanges.html">Wellness Challenges</a></li>
                </ul>
                <div class="d-flex">
                    <button class="btn btn-outline-light me-2" data-bs-toggle="modal" data-bs-target="#loginModal">Login</button>
                    <button class="btn btn-accent" data-bs-toggle="modal" data-bs-target="#signupModal">Sign Up</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section" id="home">
        <div class="container text-center">
            <h1 class="display-4 fw-bold mb-4">Your Mental Health Matters</h1>
            <p class="lead mb-4">A safe, confidential space for college students to find support, resources, and community.</p>
            <div class="d-flex justify-content-center flex-wrap gap-3">
                <button class="btn btn-light btn-lg" data-bs-toggle="modal" data-bs-target="#chatModal">Talk Now <i class="fas fa-comments ms-2"></i></button>
                <a href="#resources" class="btn btn-outline-light btn-lg">Explore Resources</a>
                <a href="#booking" class="btn btn-outline-light btn-lg">Book Appointment</a>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="container mb-5">
        <h2 class="text-center mb-4">How MindWell Supports You</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-robot fa-3x text-primary"></i>
                        </div>
                        <h3 class="h4">AI-Guided Support</h3>
                        <p class="text-muted">Get immediate help with our confidential chat system that provides evidence-based coping strategies.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-calendar-check fa-3x text-primary"></i>
                        </div>
                        <h3 class="h4">Confidential Booking</h3>
                        <p class="text-muted">Schedule appointments with certified college counselors completely anonymously.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-users fa-3x text-primary"></i>
                        </div>
                        <h3 class="h4">Peer Support</h3>
                        <p class="text-muted">Connect with other students in a moderated, safe environment to share experiences and support.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Chat Demo -->
    <section class="container mb-5">
        <h2 class="text-center mb-4">AI-Guided First Aid Support</h2>
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="chat-container">
                    <div class="chat-header">
                        <h5 class="mb-0"><i class="fas fa-robot text-primary me-2"></i> MindWell Support Assistant</h5>
                        <p class="text-muted small mb-0">Confidential • Available 24/7 • Trained to help</p>
                    </div>
                    <!-- removed static initial message — will be injected by JS -->
                    <div class="chat-messages" id="chatMessages">
                        <!-- initial bot message removed to avoid duplicate greetings -->
                    </div>
                    <div class="p-3 border-top">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Type your message here..." id="userInput">
                            <button class="btn btn-primary" type="button" id="sendMessage"><i class="fas fa-paper-plane"></i></button>
                        </div>
                        <div class="suggested-topics">
                            <div class="topic-pill" onclick="handleQuickReply('I can\'t focus on my studies')">Study focus</div>
                            <div class="topic-pill" onclick="handleQuickReply('I\'m having trouble sleeping')">Sleep issues</div>
                            <div class="topic-pill" onclick="handleQuickReply('I feel lonely at college')">Loneliness</div>
                            <div class="topic-pill" onclick="handleQuickReply('How can I reduce anxiety?')">Reduce anxiety</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Self Assessment Section -->
    <section class="container mb-5" id="assessment">
        <h2 class="text-center mb-4">Mental Health Self-Assessment</h2>
        <div class="row g-4">
            <div class="col-md-6">
                <div class="assessment-card card h-100">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-clipboard-list fa-3x text-primary"></i>
                        </div>
                        <h3 class="h4">Depression Screening</h3>
                        <p class="text-muted">Take a quick assessment based on the PHQ-9 standard screening tool.</p>
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <p class="small text-muted">5-7 minutes to complete</p>
                        <button class="btn btn-primary mt-2">Start Assessment</button>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="assessment-card card h-100">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-heartbeat fa-3x text-primary"></i>
                        </div>
                        <h3 class="h4">Anxiety Screening</h3>
                        <p class="text-muted">Take a quick assessment based on the GAD-7 standard screening tool.</p>
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <p class="small text-muted">3-5 minutes to complete</p>
                        <button class="btn btn-primary mt-2">Start Assessment</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Resources Section -->
    <section class="container mb-5" id="resources">
        <h2 class="text-center mb-4">Psychoeducational Resources</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card resource-card h-100">
                    <div class="card-body">
                        <span class="badge bg-primary mb-2">Video</span>
                        <h4>Managing Academic Stress</h4>
                        <p class="text-muted">Learn practical techniques to handle academic pressure and maintain balance.</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <span><i class="fas fa-clock me-1"></i> 15 min</span>
                            <a href="#" class="btn btn-sm btn-outline-primary">Watch</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card resource-card h-100">
                    <div class="card-body">
                        <span class="badge bg-success mb-2">Audio</span>
                        <h4>Guided Relaxation</h4>
                        <p class="text-muted">A 10-minute guided meditation to reduce anxiety and promote relaxation.</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <span><i class="fas fa-clock me-1"></i> 10 min</span>
                            <a href="#" class="btn btn-sm btn-outline-success">Listen</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card resource-card h-100">
                    <div class="card-body">
                        <span class="badge bg-info mb-2">Guide</span>
                        <h4>Sleep Better</h4>
                        <p class="text-muted">Evidence-based tips to improve sleep quality and overcome insomnia.</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <span><i class="fas fa-file-alt me-1"></i> PDF</span>
                            <a href="#" class="btn btn-sm btn-outline-info">Read</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center mt-4">
            <a href="#" class="btn btn-primary">View All Resources</a>
        </div>
    </section>

    <!-- Peer Support Forum -->
    <section class="container mb-5" id="forum">
        <h2 class="text-center mb-4">Peer Support Forum</h2>
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3>Recent Discussions</h3>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newPostModal"><i class="fas fa-plus me-1"></i> New Post</button>
                </div>
                
                <div class="forum-post">
                    <div class="d-flex justify-content-between">
                        <h5>Feeling overwhelmed with finals</h5>
                        <span class="badge bg-success">12 replies</span>
                    </div>
                    <p class="text-muted">Anyone else feeling extremely stressed about the upcoming exams? How are you coping?</p>
                    <div class="d-flex justify-content-between text-muted small">
                        <span>Posted by: Anonymous • 2 hours ago</span>
                        <a href="#" class="text-primary">Join discussion</a>
                    </div>
                </div>
                
                <div class="forum-post">
                    <div class="d-flex justify-content-between">
                        <h5>Tips for social anxiety</h5>
                        <span class="badge bg-success">8 replies</span>
                    </div>
                    <p class="text-muted">I struggle with social situations on campus. Any advice from others who've dealt with this?</p>
                    <div class="d-flex justify-content-between text-muted small">
                        <span>Posted by: Anonymous • 1 day ago</span>
                        <a href="#" class="text-primary">Join discussion</a>
                    </div>
                </div>
                
                <div class="forum-post">
                    <div class="d-flex justify-content-between">
                        <h5>Dealing with homesickness</h5>
                        <span class="badge bg-success">15 replies</span>
                    </div>
                    <p class="text-muted">This is my first semester away from home and I'm really struggling with missing my family.</p>
                    <div class="d-flex justify-content-between text-muted small">
                        <span>Posted by: Anonymous • 2 days ago</span>
                        <a href="#" class="text-primary">Join discussion</a>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <a href="#" class="btn btn-outline-primary">View All Discussions</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Booking Section -->
    <section class="container mb-5" id="booking">
        <h2 class="text-center mb-4">Book a Confidential Appointment</h2>
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body p-4">
                        <form id="bookingForm">
                            <div class="mb-3">
                                <label for="concernType" class="form-label">Primary Concern</label>
                                <select class="form-select" id="concernType">
                                    <option selected>Select what you'd like to discuss</option>
                                    <option value="anxiety">Anxiety/Stress</option>
                                    <option value="depression">Depression</option>
                                    <option value="academic">Academic Performance</option>
                                    <option value="relationships">Relationships</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="preferredDate" class="form-label">Preferred Date</label>
                                <input type="date" class="form-control" id="preferredDate">
                            </div>
                            <div class="mb-3">
                                <label for="preferredTime" class="form-label">Preferred Time</label>
                                <select class="form-select" id="preferredTime">
                                    <option selected>Select preferred time slot</option>
                                    <option value="morning">Morning (9 AM - 12 PM)</option>
                                    <option value="afternoon">Afternoon (1 PM - 4 PM)</option>
                                    <option value="evening">Evening (5 PM - 7 PM)</option>
                                </select>
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="anonymousCheck">
                                <label class="form-check-label" for="anonymousCheck">Book anonymously</label>
                            </div>
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary btn-lg">Check Availability</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5>MindWell</h5>
                    <p>A comprehensive digital mental health support platform designed for college students.</p>
                </div>
                <div class="col-md-2 mb-4 mb-md-0">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white">Home</a></li>
                        <li><a href="#resources" class="text-white">Resources</a></li>
                        <li><a href="#forum" class="text-white">Peer Support</a></li>
                        <li><a href="#booking" class="text-white">Book Appointment</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4 mb-md-0">
                    <h5>Emergency Contacts</h5>
                    <ul class="list-unstyled">
                        <li>College Counseling: 1-800-273-8255</li>
                        <li>Crisis Helpline: 1-800-985-5990</li>
                        <li>Health Center: 1-800-799-7233</li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5>Follow Us</h5>
                    <div class="d-flex gap-3">
                        <a href="#" class="text-white"><i class="fab fa-facebook fa-lg"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-instagram fa-lg"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-linkedin fa-lg"></i></a>
                    </div>
                </div>
            </div>
            <hr class="my-4 bg-light">
            <div class="text-center">
                <p class="mb-0">&copy; 2023 MindWell. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Login to MindWell</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="loginEmail" class="form-label">Email address</label>
                            <input type="email" class="form-control" id="loginEmail">
                        </div>
                        <div class="mb-3">
                            <label for="loginPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="loginPassword">
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe">
                            <label class="form-check-label" for="rememberMe">Remember me</label>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Login</button>
                    </form>
                </div>
                <div class="modal-footer justify-content-center">
                    <p class="mb-0">Don't have an account? <a href="#" data-bs-toggle="modal" data-bs-target="#signupModal" data-bs-dismiss="modal">Sign up</a></p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="signupModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create an Account</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="signupName" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="signupName">
                        </div>
                        <div class="mb-3">
                            <label for="signupEmail" class="form-label">Email address</label>
                            <input type="email" class="form-control" id="signupEmail">
                        </div>
                        <div class="mb-3">
                            <label for="signupPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="signupPassword">
                        </div>
                        <div class="mb-3">
                            <label for="signupConfirmPassword" class="form-label">Confirm Password</label>
                            <input type="password" class="form-control" id="signupConfirmPassword">
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="termsAgree">
                            <label class="form-check-label" for="termsAgree">I agree to the Terms & Conditions</label>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Sign Up</button>
                    </form>
                </div>
                <div class="modal-footer justify-content-center">
                    <p class="mb-0">Already have an account? <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal" data-bs-dismiss="modal">Login</a></p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="chatModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Support Chat</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="chat-container" style="height: 400px;">
                        <div class="chat-header">
                            <h5 class="mb-0"><i class="fas fa-robot text-primary me-2"></i> MindWell</h5>
                            <p class="text-muted small mb-0">Confidential • Available 24/7 • Trained to help</p>
                        </div>
                        <!-- removed static initial message in modal; JS will add greeting when modal opens -->
                        <div class="chat-messages" id="modalChatMessages">
                            <!-- initial bot message removed to avoid duplicate greetings -->
                        </div>
                        <div class="p-3 border-top">
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Type your message here..." id="modalUserInput">
                                <button class="btn btn-primary" type="button" id="modalSendMessage"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="newPostModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Post</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="postTitle" class="form-label">Title</label>
                            <input type="text" class="form-control" id="postTitle" placeholder="What's your post about?">
                        </div>
                        <div class="mb-3">
                            <label for="postContent" class="form-label">Content</label>
                            <textarea class="form-control" id="postContent" rows="4" placeholder="Share your thoughts..."></textarea>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="postAnonymously">
                            <label class="form-check-label" for="postAnonymously">Post anonymously</label>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Submit Post</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
		// Enhanced chatbot functionality
		const responseDatabase = {
			greetings: {
				patterns: [/hello|hi|hey|howdy|greetings/i],
				responses: [
					"Hello! How are you feeling today?",
					"Hi there! What's on your mind?",
					"Hey! How can I support you today?"
				]
			},
			anxiety: {
				patterns: [/anxious|anxiety|nervous|worry|worried|panic|stressed|stress/i],
				responses: [
					"It sounds like you're experiencing some anxiety. That's completely normal, especially for college students. Have you tried any breathing exercises?",
					"Anxiety can be really challenging. Remember to take deep breaths - inhale for 4 seconds, hold for 4, exhale for 6. Would you like to try a guided meditation?",
					"Many students experience anxiety around exams and deadlines. Breaking tasks into smaller steps can help make them more manageable. What specifically is causing you stress?"
				],
				followUp: "Would you like me to suggest some relaxation techniques or help you find resources for managing anxiety?"
			},
			depression: {
				patterns: [/depress|sad|down|hopeless|unmotivated|blue|empty|numb/i],
				responses: [
					"I'm sorry to hear you're feeling this way. It takes courage to acknowledge these feelings. Have you been able to talk to anyone about how you're feeling?",
					"What you're describing sounds difficult. Remember that depression lies to you - things can and will get better. Would it help to share more about what's going on?",
					"Many students struggle with similar feelings. You're not alone in this. Have you noticed any particular triggers for these feelings?"
				],
				followUp: "Would you like me to help you schedule an appointment with a counselor or find some resources that might help?"
			},
			academic: {
				patterns: [/study|exam|test|assignment|homework|grades|academic|school|college|class|professor/i],
				responses: [
					"Academic pressure is really common among college students. What specifically are you worried about?",
					"It sounds like school is causing you some stress. Have you tried breaking your work into smaller, manageable chunks?",
					"Many students struggle with balancing academic demands. What's your study environment like? Sometimes creating a dedicated space can help with focus."
				],
				followUp: "Would you like some tips for effective studying or time management strategies?"
			},
			sleep: {
				patterns: [/sleep|insomnia|tired|exhausted|fatigue|rest|nap|awake|wake/i],
				responses: [
					"Sleep issues can significantly impact your mental health. What's your current sleep schedule like?",
					"Many students struggle with sleep, especially around exam time. Have you tried establishing a relaxing bedtime routine?",
					"Poor sleep can make everything feel more difficult. Avoiding screens before bed and keeping a consistent sleep schedule can help. What have you tried so far?"
				],
				followUp: "Would you like some suggestions for improving sleep hygiene or a guided sleep meditation?"
			},
			relationships: {
				patterns: [/friend|family|partner|relationship|lonely|alone|isolated|social/i],
				responses: [
					"Relationships can be challenging, especially when you're balancing them with academic demands. Would you like to talk more about what's happening?",
					"Feeling lonely or isolated is common in college, even when surrounded by people. Have you been able to connect with others who share your interests?",
					"Interpersonal issues can be really draining. Remember that it's okay to set boundaries that protect your mental health."
				],
				followUp: "Would you like suggestions for meeting new people or resources for healthy communication?"
			},
			default: {
				responses: [
					"I'm here to listen. Could you tell me more about that?",
					"Thank you for sharing. How has that been affecting you?",
					"I appreciate you opening up. Would you like to talk more about what's going on?",
					"That sounds challenging. Have you experienced this before?"
				]
			}
		};
		
		const emergencyKeywords = ["suicide", "kill myself", "hurt myself", "end it all", "want to die", "not worth living"];
		
		// existing element lookups (keep)
		const chatMessages = document.getElementById('chatMessages');
		const userInput = document.getElementById('userInput');
		const sendMessage = document.getElementById('sendMessage');

		const modalChatMessages = document.getElementById('modalChatMessages');
		const modalUserInput = document.getElementById('modalUserInput');
		const modalSendMessage = document.getElementById('modalSendMessage');

		// --- New helpers & improved message rendering ---

		// escape HTML to avoid injection
		function escapeHtml(unsafe) {
			return String(unsafe).replace(/[&<>"'`=\/]/g, function (s) {
				return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;",'/':'&#x2F;','`':'&#x60;','=':'&#x3D;'}[s];
			});
		}

		// human-friendly time
		function formatTime(date = new Date()) {
			const h = date.getHours();
			const m = String(date.getMinutes()).padStart(2, '0');
			const hour = (h % 12) || 12;
			const ampm = h >= 12 ? 'PM' : 'AM';
			return `${hour}:${m} ${ampm}`;
		}

		// Add a user message as a bubble with avatar & timestamp
		function addUserMessage(message, chatContainer) {
			const row = document.createElement('div');
			row.className = 'message-row user d-flex align-items-end';

			const bubble = document.createElement('div');
			bubble.className = 'message-bubble user-message';
			bubble.innerHTML = `
				<div class="message-body">${escapeHtml(message)}</div>
				<div class="meta"><small class="timestamp">${formatTime()}</small></div>
			`;

			const avatar = document.createElement('div');
			avatar.className = 'avatar user';
			avatar.textContent = 'You';

			row.appendChild(bubble);
			row.appendChild(avatar);

			chatContainer.appendChild(row);
			chatContainer.scrollTop = chatContainer.scrollHeight;
		}

		// Add a bot message with typing indicator, avatar, quick replies support
		function addBotMessage(message, chatContainer, withQuickReplies = false, quickReplies = null) {
			// typing indicator row
			const typingRow = document.createElement('div');
			typingRow.className = 'message-row bot d-flex align-items-end';

			const typingAvatar = document.createElement('div');
			typingAvatar.className = 'avatar bot';
			typingAvatar.innerHTML = '<i class="fas fa-robot"></i>';

			const typingBubble = document.createElement('div');
			typingBubble.className = 'message-bubble typing-indicator';
			typingBubble.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';

			typingRow.appendChild(typingAvatar);
			typingRow.appendChild(typingBubble);
			chatContainer.appendChild(typingRow);
			chatContainer.scrollTop = chatContainer.scrollHeight;

			// Simulate typing time based on message length
			const delay = 700 + Math.min(1400, message.length * 10);
			setTimeout(() => {
				// remove typing indicator
				if (chatContainer.contains(typingRow)) chatContainer.removeChild(typingRow);

				// actual message row
				const row = document.createElement('div');
				row.className = 'message-row bot d-flex align-items-end';

				const avatar = document.createElement('div');
				avatar.className = 'avatar bot';
				avatar.innerHTML = '<i class="fas fa-robot"></i>';

				const bubble = document.createElement('div');
				bubble.className = 'message-bubble bot-message';
				bubble.innerHTML = `
					<div class="message-body">${escapeHtml(message)}</div>
					<div class="meta"><small class="timestamp">${formatTime()}</small></div>
				`;

				row.appendChild(avatar);
				row.appendChild(bubble);
				chatContainer.appendChild(row);

				// quick replies row (aligned under bot bubble)
				if (withQuickReplies && Array.isArray(quickReplies) && quickReplies.length) {
					const repliesRow = document.createElement('div');
					repliesRow.className = 'message-row bot d-flex align-items-start';
					// spacer to align replies with bubble
					const spacer = document.createElement('div');
					spacer.style.width = getComputedStyle(avatar).width || '40px';
					repliesRow.appendChild(spacer);

					const repliesWrap = document.createElement('div');
					repliesWrap.className = 'quick-replies';
					quickReplies.forEach(reply => {
						const btn = document.createElement('button');
						btn.className = 'quick-reply';
						btn.type = 'button';
						btn.textContent = reply;
						btn.onclick = () => handleQuickReply(reply, chatContainer.id === 'modalChatMessages' ? 'modal' : 'main');
						repliesWrap.appendChild(btn);
					});
					repliesRow.appendChild(repliesWrap);
					chatContainer.appendChild(repliesRow);
				}

				chatContainer.scrollTop = chatContainer.scrollHeight;
			}, delay);
		}

		// --- Input wiring and UX improvements (disable send when empty, autofocus) ---
		(function setupChatInputs() {
			function toggleSend(btn, inp) {
				if (!btn || !inp) return;
				btn.disabled = inp.value.trim() === '';
			}

			if (userInput) {
				userInput.addEventListener('input', () => toggleSend(sendMessage, userInput));
				userInput.addEventListener('keypress', (e) => { if (e.key === 'Enter' && userInput.value.trim()) handleUserMessage(userInput, chatMessages); });
				setTimeout(() => userInput.focus(), 400);
				toggleSend(sendMessage, userInput);
			}

			if (modalUserInput) {
				modalUserInput.addEventListener('input', () => toggleSend(modalSendMessage, modalUserInput));
				modalUserInput.addEventListener('keypress', (e) => { if (e.key === 'Enter' && modalUserInput.value.trim()) handleUserMessage(modalUserInput, modalChatMessages); });
				const modalEl = document.getElementById('chatModal');
				if (modalEl) modalEl.addEventListener('shown.bs.modal', () => { setTimeout(()=>modalUserInput.focus(), 120); });
				toggleSend(modalSendMessage, modalUserInput);
			}

			if (sendMessage) sendMessage.addEventListener('click', () => { if (userInput.value.trim()) handleUserMessage(userInput, chatMessages); });
			if (modalSendMessage) modalSendMessage.addEventListener('click', () => { if (modalUserInput.value.trim()) handleUserMessage(modalUserInput, modalChatMessages); });
		})();

		// --- keep existing quick-reply handler and modal greeting injection --- 
		function checkForEmergency(message) {
			return emergencyKeywords.some(keyword => 
				message.toLowerCase().includes(keyword)
			);
		}
		
		function findResponse(message) {
			// Check for emergency first
			if (checkForEmergency(message)) {
				return {
					response: "I'm concerned about what you're sharing. Please contact the emergency helpline at 1-800-273-8255 immediately. You're not alone, and there is help available. Would you like me to help you connect with emergency resources?",
					followUp: null,
					isEmergency: true
				};
			}
			
			// Check message against all patterns
			for (const category in responseDatabase) {
				if (category === 'default') continue;
				
				const categoryData = responseDatabase[category];
				for (const pattern of categoryData.patterns) {
					if (pattern.test(message)) {
						return {
							response: categoryData.responses[Math.floor(Math.random() * categoryData.responses.length)],
							followUp: categoryData.followUp,
							isEmergency: false
						};
					}
				}
			}
			
			// Default response if no patterns match
			return {
				response: responseDatabase.default.responses[Math.floor(Math.random() * responseDatabase.default.responses.length)],
				followUp: null,
				isEmergency: false
			};
		}
		
		function handleUserMessage(inputElement, chatContainer) {
			const message = inputElement.value.trim();
			if (message === '') return;
			
			addUserMessage(message, chatContainer);
			inputElement.value = '';
			
			const { response, followUp, isEmergency } = findResponse(message);
			
			addBotMessage(response, chatContainer);
			
			if (followUp && !isEmergency) {
				setTimeout(() => {
					addBotMessage(followUp, chatContainer, true, ['Yes, please', 'Not right now']);
				}, 2500);
			}
		}
		
		function handleQuickReply(message, context) {
			const inputElement = context === 'modal' ? modalUserInput : userInput;
			const chatContainer = context === 'modal' ? modalChatMessages : chatMessages;
			
			inputElement.value = message;
			handleUserMessage(inputElement, chatContainer);
		}
		
		// Event listeners for the main chat
		sendMessage.addEventListener('click', () => handleUserMessage(userInput, chatMessages));
		userInput.addEventListener('keypress', (e) => {
			if (e.key === 'Enter') handleUserMessage(userInput, chatMessages);
		});
		
		// Event listeners for the modal chat
		modalSendMessage.addEventListener('click', () => handleUserMessage(modalUserInput, modalChatMessages));
		modalUserInput.addEventListener('keypress', (e) => {
			if (e.key === 'Enter') handleUserMessage(modalUserInput, modalChatMessages);
		});
		
		// Form submission handlers
		document.getElementById('bookingForm').addEventListener('submit', function(e) {
			e.preventDefault();
			alert('Your appointment request has been received. A counselor will contact you soon.');
			this.reset();
		});
		
		// Add modal greeting when modal is opened (prevents duplicate greetings)
		(function() {
			const modalEl = document.getElementById('chatModal');
			const modalChatMessages = document.getElementById('modalChatMessages');
			if (modalEl && modalChatMessages) {
				modalEl.addEventListener('shown.bs.modal', function () {
					// only add greeting if modal chat is empty
					if (modalChatMessages.children.length === 0) {
						addBotMessage("Welcome to MindWell! I'm here to provide support and guidance. How are you feeling today?", modalChatMessages, true, [
							"I'm feeling anxious",
							"I'm stressed about school",
							"I'm feeling down",
							"I need relaxation techniques"
						]);
					}
				});
			}
		})();
		
		// Initialize with a greeting if chat is empty
		if (chatMessages.children.length <= 1) {
			setTimeout(() => {
				addBotMessage("Welcome to MindWell! I'm here to provide support and guidance. How are you feeling today?", chatMessages, true, [
					"I'm feeling anxious",
					"I'm stressed about school",
					"I'm feeling down",
					"I need relaxation techniques"
				]);
			}, 1000);
		}

		// small visual feedback when user clicks quick-reply or topic-pill
		(function addQuickReplyPulse() {
			document.addEventListener('click', function (e) {
				const el = e.target.closest('.quick-reply, .topic-pill');
				if (!el) return;
				el.classList.add('pressed');
				setTimeout(() => el.classList.remove('pressed'), 200);
				// ensure topic-pill triggers existing handler if it wasn't wired (safety)
				if (el.classList.contains('topic-pill') && !el.hasAttribute('data-hooked')) {
					el.setAttribute('data-hooked', '1');
					el.addEventListener('click', () => handleQuickReply(el.textContent.trim()));
				}
			}, false);
		})();
    </script>
</body>
</html>